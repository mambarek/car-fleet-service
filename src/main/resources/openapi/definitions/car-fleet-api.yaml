openapi: 3.0.1
info:
  title: Car Fleet Service
  description: Car Fleet Service API
  version: 1.0.0
  contact:
    name: API Support
    url: http://www.example.com/support
    email: support@example.com
  license:
    name: Apache license 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
servers:
  - url: http://localhost:8030/api/v1
tags:
  - name: car
    description: Operations about Car
    externalDocs:
      description: Find out more about our store
      url: http://swagger.io

paths:
  /cars/{publicId}:
    get:
      tags:
        - car
      operationId: getCarByPublicId
      summary: Get Car by publicId
      description: Get Car by it's publicId
      parameters:
        - name: publicId
          in: path
          required: true
          description: The Car public id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Car successfuly found
          content:
            'application/json':
              schema:
                $ref: './object-schema.yaml#/components/schemas/Car'
        "404":
          description: Car not found
          content: {}
    post:
      tags:
        - car
      operationId: updateCar
      summary: Update a car
      description: Update an existing Car
      parameters:
        - name: publicId
          in: path
          required: true
          description: The Car bublicId
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          "application/json":
            schema:
              $ref: './object-schema.yaml#/components/schemas/Car'
        required: true
      responses:
        "200":
          description: Car successful updated
          content:
            "application/json":
              schema:
                $ref: './object-schema.yaml#/components/schemas/Car'
        "400":
          description: Bad request
          content:
            {}

    delete:
      tags:
        - car
      description: Delete car by publicId
      summary: Delete car
      operationId: deleteCar
      parameters:
        - name: publicId
          in: path
          required: true
          description: The Car bublicId
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Car successful deleted
          content:
            {}

  /cars:
    get:
      tags:
        - car
      operationId: getCars
      summary: Returns all cars
      description: Return all Cars from DB
      responses:
        "200":
          description: Cars found
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "./object-schema.yaml#/components/schemas/Car"
    post:
      tags:
        - car
      operationId: saveCar
      summary: Save a new Car
      description: Save a new Car to DB
      requestBody:
        content:
          "application/json":
            schema:
              $ref: './object-schema.yaml#/components/schemas/Car'
        required: true
      responses:
        "200":
          description: Car saved successfully
          content:
            application/json:
              schema:
                  $ref: "./object-schema.yaml#/components/schemas/Car"

  /cars/search:
    post:
      tags:
        - search
      summary: Search cars for a given filter
      description: Return a SearchResult containing found cars
      operationId: search
      requestBody:
        content:
          application/json:
            schema:
              $ref: './shared-objects-schema.yaml#/components/schemas/SearchTemplate'
        required: true
        description: SearchTemplate with filter Groups
      responses:
        "200":
          description: OK
          content:
            'application/json':
              schema:
                $ref: './object-schema.yaml#/components/schemas/SearchResult'

